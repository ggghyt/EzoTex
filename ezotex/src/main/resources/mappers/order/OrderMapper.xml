<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezotex.order.mappers.OrderMapper">
	<select id="getOrderList">
		SELECT *
		FROM ORDER_LIST
		order by PRODUCT_ORDER_CODE
	</select>

	<select id="getProductList">
		SELECT *
		FROM PRODUCT_INFO
		WHERE PRODUCT_TYPE != 'PT01'
		order by product_code
	</select>
	<select id="getCompanyList">
		SELECT *
		FROM COMPANY
	</select>

	<select id="getProductOption">
		SELECT product_color
		FROM PRODUCT_OPTION
		WHERE product_code = #{productCode}
		GROUP BY product_color
	</select>
	<insert id="insertOrder">
		INSERT INTO ORDER_LIST
		(
			product_order_code,
			company,
			company_representative,
			company_tel,
			charger,
			delivery_request_deadline,
			order_status,
			company_code,
			order_date,
			emp_code,
			remarks,
			amount
		)
		VALUES
		(
			ORDER_SEQ.NEXTVAL,
			#{company},
			#{companyRepresentative},
			#{companyTel},
			#{charger},
			#{deliveryRequestDeadline},
			#{orderStatus},
			#{companyCode},
			sysdate,
			#{empCode},
			#{remarks},
			#{amount}
		)
		INSERT INTO ORDER_PRODUCT
		(
			order_detail_code,
			product_order_code,
			product_code,
			product_color,
			product_size,
			qy,
			unit_price
		)
		VALUES
		(
			ORDER_DETAIL_SEQ.NEXTVAL,
			#{PRODUCT_ORDER_CODE},
			#{PRODUCT_CODE},
			#{PRODUCT_COLOR},
			#{PRODUCT_SIZE},
			#{QY},
			#{UNIT_PRICE}
		)
	</insert>
</mapper>