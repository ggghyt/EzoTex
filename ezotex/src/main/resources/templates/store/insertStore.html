<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}" layout:fragment="content">
<head>
<meta charset="UTF-8">
<title>이조텍스SCM</title>
<!-- timePicker -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.css" />
<script
	src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.js"></script>

<!-- datePicker -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
<script
	src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>

<!-- paging -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
<script
	src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>

<!-- toast grid -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
<style type="text/css">
#modalGrid {
	width: 100%;
	height: 400px; /* 또는 원하는 높이 설정 */
}
</style>
</head>
<body>

	<!-- Modal1 -->
	<div class="modal fade" id="exampleModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="card">
					<div class="card-body">
						<div class="mb-3 row">
							<label for="inputPassword" class="col-sm-2 col-form-label">검색조건1</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="inputPassword"
									style="width: 200px;">
							</div>
						</div>
						<div class="mb-3 row">
							<label for="inputPassword" class="col-sm-2 col-form-label">검색조건2</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="inputPassword"
									style="width: 200px;">
							</div>
						</div>

						<div id="modalGrid"></div>
					</div>
				</div>
				<div style="text-align: center; margin: 20px;">
					<button type="button" class="btn btn-outline-primary btn-fw">수정</button>
					<button type="button" class="btn btn-inverse-dark btn-fw"
						data-bs-dismiss="modal">취소</button>
				</div>
			</div>
		</div>
	</div>



	<div class="d-flex align-items-center">
		<h3 class="fs-3 fw-bold">| 제품 입고 등록</h3>
		<!-- <button class="btn btn-secondary" style="margin: 10px;">자재 입고</button>
		<button class="btn btn-secondary" style="margin: 10px;">제품 입고</button> -->
	</div>
	<div class="card card-body mt-3">
		<div class="col-12 card card-body m-2">
			<div class="row g-3 align-items-center">
				<div class="col-auto">
					<label class="col-form-label">납품코드</label>
				</div>
				<div class="col-auto">
					<input type="text" id="" class="form-control">
				</div>
			</div>
			<div class="row g-3 align-items-center">
				<div class="col-auto">
					<label class="col-form-label">검색조건2</label>
				</div>
				<div class="col-auto">
					<input type="text" id="" class="form-control">
				</div>
			</div>
		</div>


		<div class="row">
			<div class="col-5 card card-body m-2">
				<p class="fs-5 fw-bolder mt-2">제품 목록</p>
				<div id="grid">
					<div id="pagination" class="tui-pagination"></div>
				</div>
			</div>

			<div class="col-5 card card-body m-2">
				<p class="fs-5 fw-bolder mt-2">입고 등록</p>
				<div id="grid2"></div>

				<div class="d-flex justify-content-end mt-2">
					<div class="col">
				<div class="card card-body mt-3">
					
					<!-- 제품 상세 정보 및 BOM 정보 -->
					<div class="d-flex align-items-top">
							<p class="fs-5 fw-bolder mb-3 me-3">선택한 제품</p>
							<label style="font-size: 10pt" for="remember">입력항목 유지</label><input type="checkbox" id="remember" class="ms-1 mb-4">
					</div>
					<div class="row">
						<label class="col-4 col-lg-2 d-flex mb-2 align-items-center justify-content-center wbreak">제품코드</label>
						<div class="col-8 col-lg-4 d-flex mb-2">
							<input type="search" class="form-control" id="productCode" readonly>
						</div>
						<label class="col-4 col-lg-2 d-flex mb-2 align-items-center justify-content-center wbreak">제품명</label>
						<div class="col-8 col-lg-4 d-flex mb-2">
							<input type="search" class="form-control" id="productName" readonly>
						</div>
						
						<label for="color" class="col-4 col-lg-2 d-flex mb-2 align-items-center justify-content-center wbreak">색상</label>
						<div class="col-8 col-lg-4 d-flex mb-2">
							<select class="form-control" id="color" name="color">
								<option value="null">전체</option>
							</select>
						</div>
						<label for="size" class="col-4 col-lg-2 d-flex mb-2 align-items-center justify-content-center wbreak">사이즈</label>
						<div class="col-8 col-lg-4 d-flex mb-2">
							<select class="form-control" id="size" name="size">
								<option value="null">전체</option>
							</select>
						</div>
					</div>
					
					<hr style="height: 0.1px">
				</div>

			</div>
		</div>

	</div>


	<!-- 등록 버튼 클릭 -->

	<!-- 등록 모달 -->
	<div class="modal fade" id="registModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header" style="height: 20px;">
					<h5 class="modal-title" id="exampleModalLabel"
						style="font-size: 15px;">등록 확인</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body"
					style="text-align: center; padding: 44px; padding-bottom: 10px;">
					<div>
						<img src="/images/modal/regist.png" alt="등록확인이미지"
							style="width: 84px; height: 84px;">
					</div>
					<div>
						<p style="margin-top: 12px; font-size: 21px; font-weight: bold;">알림</p>
						<p>내용을 등록하시겠습니까?</p>
					</div>
				</div>
				<div class="modal-footer regist"
					style="display: flex; justify-content: center; border-top: none; padding-bottom: 45px;">
					<!---->
					<button type="button" id="InsertTest"
						class="btn btn-outline-primary checkBtn" data-bs-dismiss="modal">등록</button>
					<button type="button" class="btn btn-secondary denyBtn"
						data-bs-dismiss="modal">취소</button>
				</div>
			</div>
		</div>
	</div>



	<!-- Toast UI Grid 스크립트 -->
	<script>
		
	   	
	    const dataSource = {
	      api: {
	          readData: { url: 'http://localhost:80/store/productInfoList', method: 'GET' },
	        },
	      contentType: 'application/json',
	    };  
	    
	    const storeGrid = new Grid({
	      el: document.getElementById('grid'), // 컨테이너 엘리먼트
	      rowHeaders: ['rowNum'],
	      columnOptions: {
	          resizable: true
	      },
	      pageOptions:{
	          useClient: false,
	          perPage: 10
	        },
	      columns: [ 
	        { header: "제품코드", name: "productCode", align: "center"},
	        { header: "제품명", name: "productName", align: "center"},
	        { header: "단가", name: "unitPrice", align: "center"},
	      ],
	      data: dataSource,
	    });
	    
	    
	    storeGrid.on('click', ev => {

	    	let data = storeGrid.getRow(ev.rowKey);
	    	document.querySelector('#productCode').value = data.productCode;
	    	document.querySelector('#productName').value = data.productName;
	    	
	    	fetch(`http://localhost:80/store/productColor?productCode=${data.productCode}`)
	    	     .then(rep => rep.json())
	    	     .then(data => {
	    	    	 console.log('data: ', data);
	    	     })
	    	
	    })
	   
	    
	   	
	  
	    
	    /*
	   	*========================================================================
	   	* 창고위치 모달 그리드 END!!
	   	*========================================================================
	   	*/
	    
	    // Bootstrap 모달 이벤트 리스너 추가
		const modalElement = document.getElementById('exampleModal');

		modalElement.addEventListener('show.bs.modal', function () {
		    modalElement.style.display = 'block'; // 모달을 블록으로 변경
		    modalElement.style.opacity = '0'; // 투명하게 숨김
		});
		
		modalElement.addEventListener('shown.bs.modal', function () {
		    storeGrid5.refreshLayout();  // 모달이 완전히 뜬 후 크기 조정
		    modalElement.style.opacity = '1'; // 투명도 복원
		});


	    
	    </script>

</body>
</html>