<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}" layout:fragment="content">
<head>
<meta charset="UTF-8">
<title>이조텍스SCM</title>
<link rel="stylesheet"
	href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
</head>
<body>
	<h3 class="fs-3 fw-bold">| 주문 내역 조회</h3>
	<div class="card card-body mt-3">
		<div class="row">
			<!-- Toast Grid를 표시할 div 추가 -->
			<div class="col-12 card card-body m-2">
				<p class="fs-5 fw-bolder">주문 목록</p>
				<!-- 그리드를 표시할 div -->
				<div id="orderGrid"></div>
			</div>
		</div>
	</div>

	<script th:inline="javascript">
		// Thymeleaf에서 getOrderList 데이터를 JSON으로 변환해서 JavaScript로 전달
		const orderList = /*[[${getOrderList}]]*/[];

		// 전달된 데이터 확인 (콘솔에 출력)
		console.log(orderList);

		// Toast Grid 설정
		const grid = new tui.Grid(
				{
					el : document.getElementById('orderGrid'), // 그리드를 표시할 div
					data : orderList, // 서버에서 전달된 데이터
					columnOptions : {
						resizable : true
					// 컬럼 크기 조절 가능
					},
					rowHeaders:['rowNum'],
					columns : [
							{
								header : '주문코드',
								name : 'productOrderCode',
								align : 'center'
							},
							{
								header : '업체명',
								name : 'company',
								align : 'center'
							},
							{
								header : '업체 담당자',
								name : 'companyRepresentative',
								align : 'center'
							},
							{
								header : '주문 담당자',
								name : 'charger',
								align : 'center'
							},
							{
								header : '주문상태',
								name : 'orderStatus',
								align : 'center'
							},
							{
								header : '요약',
								name : 'summary',
								align : 'center'
							},
							{
								header : '주문일',
								name : 'orderDate',
								align : 'center',
							},
							{
								header : '납기일',
								name : 'deliveryRequestDeadline',
								align : 'center',
							},
							{
								header : '주문금액합계',
								name : 'amount',
								align : 'right',
							},
							{
								header : '상세보기',
								name : 'details',
								align : 'center',
								formatter : function() {
									return '<button type = "button" class="btn btn-info btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal2">상세보기</button>';
								}
							} ],
						    pageOptions: {
						        useClient: true, // 페이징을 위해 필요
						        perPage: 10
					      	},
					
				});
	</script>
	<!-- 상세보기 모달 시작 -->
	<div class="modal fade" id="exampleModal2" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl">
			<div class="modal-content">
				<div class="modal-header" style="background-color: gray;"> 주문 내역 상세조회</div>
				<div class="card">
					<div class="card-body">
					<div id="orderDetailGrid" style="width: 100%;"></div>
						<script>
						const orderDetailGrid = new tui.Grid({
						      el: document.getElementById('orderDetailGrid'), // 그리드를 표시할 엘리먼트
						      scrollX: false, // 가로 스크롤바 비활성화
						      scrollY: false, // 세로 스크롤바 비활성화
						      rowHeight: 'auto',  // 행 높이를 자동으로 조정
						      rowHeaders: ['checkbox',{ type: 'rowNum', header: 'NO' }],
						      columns: [
						      ],
							    pageOptions: {
							        useClient: true, // 페이징을 위해 필요
							        perPage: 3
						      	},
						    });
						</script>
					</div>
				</div>
				<div style="text-align: center; margin: 20px;">
					<button type="button" class="btn btn-outline-primary btn-fw">수정</button>
					<button type="button" class="btn btn-inverse-dark btn-fw"
						data-bs-dismiss="modal">취소</button>
				</div>
			</div>
		</div>
	</div>
	<!-- 상세보기 모달 끝 -->
	<!-- 	<button type="button" class="btn btn-primary" data-bs-toggle="modal"
		data-bs-target="#exampleModal2">ModalTest2</button> -->
</body>
</html>
